(this["webpackJsonpuse-defer-example"]=this["webpackJsonpuse-defer-example"]||[]).push([[0],{11:function(e,t,n){},12:function(e,t,n){"use strict";n.r(t);var r=n(0),u=n.n(r),a=n(2),l=n.n(a),c=(n(11),n(3)),s=function(){return(s=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var u in t=arguments[n])Object.prototype.hasOwnProperty.call(t,u)&&(e[u]=t[u]);return e}).apply(this,arguments)};var o;!function(e){e.IDLE="idle",e.PENDING="pending",e.SUCCESS="success",e.ERROR="error"}(o||(o={}));var i=function(e,t,n){void 0===t&&(t=[]);var u=Object(r.useRef)(0),a=Object(r.useRef)({status:o.IDLE}),l=Object(r.useState)(a.current),c=l[0],i=l[1],d=function(e){a.current=e,i(e)},p=Object(r.useCallback)((function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return++u.current,d(s(s({},a.current),{status:o.PENDING})),e.apply(void 0,t).then((function(e){return d({status:--u.current?a.current.status:o.SUCCESS,value:e}),e})).catch((function(e){return--u.current||d({status:o.ERROR,error:e}),Promise.reject(e)}))}),t);return Object(r.useEffect)((function(){n&&p.apply(void 0,n)}),function(){for(var e=0,t=0,n=arguments.length;t<n;t++)e+=arguments[t].length;var r=Array(e),u=0;for(t=0;t<n;t++)for(var a=arguments[t],l=0,c=a.length;l<c;l++,u++)r[u]=a[l];return r}([p],n||[])),s(s({},c),{execute:p})},d=function(e){return new Promise((function(t,n){e>0?setTimeout(t,2e3,Math.round(Math.random()*e)):setTimeout(n,2e3,"Max value must be greater than zero")}))},p=function(){var e=u.a.useState(""),t=Object(c.a)(e,2),n=t[0],r=t[1],a=i(d,[n],[n?+n:100]),l=a.value,s=a.error,o=a.status;return u.a.createElement("div",null,u.a.createElement("div",null,u.a.createElement("input",{type:"number",value:n,placeholder:100..toString(),onChange:function(e){return r(e.target.value)}}),"pending"===o?u.a.createElement("span",null,"processing "):null),void 0!==l?u.a.createElement("div",null,"Last result: ",l):null,s?u.a.createElement("div",null,"Error: ",s):null)},f=n(1),m={lastId:2,resources:[{id:1,label:"First resource"},{id:2,label:"Second resource"}]},v=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1e3*Math.random();return new Promise((function(n){return setTimeout((function(){return n(e())}),t)}))},g={get:function(){return v((function(){return m.resources}))},post:function(e){return v((function(){var t=Object(f.a)(Object(f.a)({},e),{},{id:++m.lastId});return m.resources.push(t),t}))},put:function(e,t){return v((function(){if(m.resources.find((function(t){return t.id===e}))){var n=Object(f.a)(Object(f.a)({},t),{},{id:e});return m.resources=m.resources.map((function(t){return t.id===e?n:t})),n}}))},delete:function(e){return v((function(){var t=m.resources.length;return m.resources=m.resources.filter((function(t){return t.id!==e})),m.resources.length!==t}))}},b=function(){var e=i(g.get,[],[]),t=e.execute;return{resources:e.value,status:e.status,create:i((function(e){return g.post(e).then(t)})).execute,remove:i((function(e){return g.delete(e).then(t)})).execute}},E=function(){var e=Object(r.useRef)(null),t=b(),n=t.resources,a=t.status,l=t.create,c=t.remove;return u.a.createElement("div",null,u.a.createElement("form",{onSubmit:function(t){t.preventDefault(),l({label:e.current.value}),e.current.value=""}},u.a.createElement("input",{type:"text",ref:e,required:!0}),u.a.createElement("input",{type:"submit",value:"Add"})),n||"pending"!==a?null:u.a.createElement("p",null,"Loading..."),n?u.a.createElement("ol",null,n.map((function(e){return u.a.createElement("li",{key:e.id},e.label," ",u.a.createElement("input",{type:"button",onClick:function(){return c(e.id)},value:"remove"}))}))):null)},h={display:"flex",flexWrap:"wrap",padding:"2em",margin:"2em",border:"2px solid lightgray"},x={width:"100%",textAlign:"center"},y={flex:1},R={display:"flex",alignItems:"center",paddingLeft:"2em",borderLeft:"1px solid lightgray",width:"260px"},S=function(e){var t=e.title,n=e.code,r=e.path,a=e.children;return u.a.createElement("div",{style:h},u.a.createElement("h2",{style:x},u.a.createElement("a",{href:"".concat("https://github.com/termosa/use-defer/blob/master/example").concat(r),style:{color:"#444"}},"Example: ",t)),u.a.createElement("pre",{style:y},n),u.a.createElement("div",{style:R},a))},j=function(){return u.a.createElement(u.a.Fragment,null,u.a.createElement(S,{title:"Single Request",code:"const SingleFunctionExample = () => {\n  const [max, setMax] = React.useState('');\n\n  const { value, error, status } = useDefer(\n    generateNumber,           // Async function that returns promise\n    [max],                    // Dependencies\n    [max ? +max : defaultMax] // Initial arguments\n  );\n\n  return (\n    <div>\n      <div>\n        <input\n          type=\"number\"\n          value={max}\n          placeholder={defaultMax.toString()}\n          onChange={e => setMax(e.target.value)}\n        />\n        {status === 'pending' ? <span>processing </span> : null}\n      </div>\n      {value !== undefined ? <div>Last result: {value}</div> : null}\n      {error ? <div>Error: {error}</div> : null}\n    </div>\n  );\n};",path:"/src/SingleFunctionExample.js"},u.a.createElement(p,null)),u.a.createElement(S,{title:"Multiple Requests",code:'const useResources = () => {\n  const { execute: reload, value: resources, status } = useDefer(api.get, [], []);\n  const { execute: create } = useDefer(resource => api.post(resource).then(reload));\n  const { execute: remove } = useDefer(id => api.delete(id).then(reload));\n\n  return { resources, status, create, remove };\n};\n\nconst MultipleFunctionsExample = () => {\n  const resourceLabelRef = useRef(null);\n  const { resources, status, create, remove } = useResources();\n\n  const onSubmit = e => {\n    e.preventDefault();\n    create({ label: resourceLabelRef.current.value });\n    resourceLabelRef.current.value = \'\';\n  };\n\n  return (\n    <div>\n      <form onSubmit={onSubmit}>\n        <input type="text" ref={resourceLabelRef} required />\n        <input type="submit" value="Add" />\n      </form>\n\n      {!resources && status === \'pending\' ? <p>Loading...</p> : null}\n\n      {resources\n        ? <ol>\n          {resources.map(res => (\n            <li key={res.id}>\n              {res.label}\n              {\' \'}\n              <input type="button" onClick={() => remove(res.id)} value="remove" />\n            </li>\n          ))}\n        </ol>\n        : null\n      }\n    </div>\n  );\n};',path:"/src/MultipleFunctionsExample.js"},u.a.createElement(E,null)))};l.a.render(u.a.createElement(j,null),document.getElementById("root"))},4:function(e,t,n){e.exports=n(12)}},[[4,1,2]]]);
//# sourceMappingURL=main.46e79461.chunk.js.map